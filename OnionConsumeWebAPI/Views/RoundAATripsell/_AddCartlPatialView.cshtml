@model DomainLayer.ViewModel.ViewModel
@{
    var Data = Model;
}

<style>
    .btn2 {
        border: 1px solid #0057bb;
        padding: 4px 26px;
        border-radius: 2px;
        margin-top: 6px;
    }

    .input-ammount2 {
        color: #f80711;
        background: none;
        justify-content: start;
        display: flex;
        width: 100px;
        border: none;
    }

    .seat-section1 {
        overflow: hidden;
        overflow-y: scroll;
        max-height: 350px;
    }

    .mealAddFareBtn {
        border-radius: 3px;
        box-shadow: 0 0 5px 0 rgba(0,0,0,.2);
        background-color: #fff !important;
        width: 90px;
        text-align: center;
        font-size: 12px;
        font-weight: 700;
        color: #000 !important;
        text-transform: uppercase;
        outline: 0;
        border: 0;
        padding: 8px;
    }

    .mealbtn-increase {
        background: #fff;
        justify-content: space-between;
        padding: 6px;
        border-radius: 3px;
        width: 90px;
        box-shadow: 0 0 5px 0 rgba(0,0,0,.2);
    }

    .meal-decr {
        color: #1685e7;
        font-weight: 700;
    }

    .meal-incr {
        color: #1685e7;
        font-weight: 700;
    }

    .mealinput {
        width: 30px;
        text-align: center;
        border: none;
    }

        .mealinput input {
            outline: none;
        }

    .mealbtn {
        padding: 8px;
    }

    .img-bg img {
        background: #b7e3c3;
        padding: 10px;
        border-radius: 10px;
    }
</style>

<div class="relative  js-section-slider pt-10 sm:pt-20" data-gap="30" data-scrollbar data-slider-cols="xl-5 lg-4 md-3 sm-2 base-1" data-nav-prev="js-tour-prev-one" data-pagination="js-tour-pag" data-nav-next="js-tour-next-one">

    @{

        for (int l = 0; l < Model.MealslistRT[0].legSsrs.Count; l++)
        {
            if (l == 0)
            {
                <div id="tabshowRTmealA" class="seat-section1">
                    A
                    <div class="swiper-wrapper flex-column slid-rght">

                        @{

                            for (int i = 0; i < Model.MealslistRT[0].legSsrs[l].legssrs.Count; i++)
                            {
                                <div class="swiper-slide active" style="max-width:100%;">
                                    <div class="tourTypeCard__content text-center pt-10 pb-24 px-10 bg-blue-1-05 rounded-4">
                                        <span class="nveg-food"></span>
                                        @*New Design Meal Start*@
                                        <div class="d-flex bg-light justify-content-between align-items-center p-3">
                                            <div class="d-flex">
                                                <div class="img-bg p-1">
                                                    <img src="~/img/images/pmeal.png" title="image" alt="image">
                                                </div>
                                                <div class="mealtext break-word p-1">
                                                    <h6 class="text-14 fw-600 mt-10">@Model.MealslistRT[0].legSsrs[l].legssrs[i].name </h6>
                                                    <div class="d-flex">
                                                        <div class="text-danger">&#8377</div>
                                                        <div><input class="input-ammount2" id="inputField" type="text" name="inputField" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" /></div>

                                                    </div>
                                                </div>

                                            </div>
                                            <div class="d-flex justify-content-center">
                                                <input type="checkbox" id="ssrkey+@i" name="ssrKey" value='"@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].ssrKey _@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price  _@l _@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].Airline _OneWay0"' />
                                                <input type="checkbox" class="meal-ammount" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" />

                                                <input type="hidden" id="mealprice+@i" name="inputFieldmeal" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" />
                                                <input type="hidden" id="passengerkey" name="passengerkey" value="@Model.passeengerlistRT[0].passengers[0].passengerKey" />

                                                @*<input type="submit" class="btn btn-primary" id="showValueButton" onchange="AddMeal()" value="Select" />*@
                                                @* <div class="btn2" data-ssrkey="ssrkey+@i" id="showValueButton" onclick="selectSSR_test(this)">Select</div>*@
                                            </div>

                                            <div class="mealbtn">
                                                <div class="mealAddFareBtn btnnew" id="mealAddID">Add</div>
                                                <div id="incrSign" class="incrSignCls" style="display:none">
                                                    <div class="d-flex mealbtn-increase">
                                                        <div class="meal-decr">-</div>
                                                        <input type="number" class="mealinput" value="0">
                                                        <div class="meal-incr">+</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        @*New design Meal End*@

                                        @*<img src="~/img/images/non-veg-img-1.png" title="image" alt="image">
                    <h6 class="text-14 fw-600 mt-10"> @Model.MealslistRT[0].legSsrs[l].legssrs[i].name </h6>
                    <input class="input-ammount2" id="inputField" type="text" name="inputField" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price"  />
                    <div class="d-flex justify-content-center">
                    <input type="checkbox" id="ssrkey+@i" name="ssrKey" value='"@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].ssrKey _@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price _@l _@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].Airline"' />
                    <input type="checkbox" class="meal-ammount" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" />
                    <input type="hidden" id="mealprice+@i" name="inputFieldmeal" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" />
                    <input type="hidden" id="passengerkey" name="passengerkey" value="@Model.passeengerlistRT[0].passengers[0].passengerKey" />

                    </div>
                    <div class="mealbtn">
                    <div class="mealAddFareBtn" id="mealAddID">Add</div>
                    <div id="incrSign" class="incrSignCls" style="display:none">
                    <div class="d-flex mealbtn-increase">
                    <div class="meal-decr">-</div>
                    <input type="number" class="mealinput" value="1">
                    <div class="meal-incr">+</div>
                    </div>
                    </div>
                    </div>*@

                                    </div>
                                </div>

                                @***********New design Meal ****************@

                            }

                        }

                    </div>
                </div>
            }
            else
            {
                <div id="tabshowRTmealB" class="seat-section1">
                    B
                    <div class="swiper-wrapper flex-column slid-rght">

                        @{
                            for (int i = 0; i < Model.MealslistRT[0].legSsrs[l].legssrs.Count; i++)
                            {
                                <div class="swiper-slide active" style="max-width:100%;">
                                    <div class="tourTypeCard__content text-center pt-10 pb-24 px-10 bg-blue-1-05 rounded-4">
                                        <span class="nveg-food"></span>
                                        <div class="d-flex bg-light justify-content-between align-items-center p-3">
                                            <div class="d-flex">
                                                <div class="img-bg p-1">
                                                    <img src="~/img/images/pmeal.png" title="image" alt="image">
                                                </div>
                                                <div class="mealtext break-word p-1">
                                                    <h6 class="text-14 fw-600 mt-10">@Model.MealslistRT[0].legSsrs[l].legssrs[i].name </h6>
                                                    <div class="d-flex">
                                                        <div class="text-danger">&#8377</div>
                                                        <div><input class="input-ammount2" id="inputField" type="text" name="inputField" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" /></div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="d-flex justify-content-center">
                                                <input type="checkbox" id="ssrkey+@i" name="ssrKey" value='"@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].ssrKey _@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price _@l _@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].Airline _OneWay1"' />
                                                <input type="checkbox" class="meal-ammount" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" />

                                                <input type="hidden" id="mealprice+@i" name="inputFieldmeal" value="@Model.MealslistRT[0].legSsrs[l].legssrs[i].legpassengers[0].price" />
                                                <input type="hidden" id="passengerkey" name="passengerkey" value="@Model.passeengerlistRT[0].passengers[0].passengerKey" />

                                                @*<input type="submit" class="btn btn-primary" id="showValueButton" onchange="AddMeal()" value="Select" />*@
                                                @*<div class="btn2" data-ssrkey="ssrkey+@i" id="showValueButton" onclick="selectSSR_test(this)">Select</div>*@
                                            </div>
                                            <div class="mealbtn">
                                                <div class="mealAddFareBtn btnnew" id="mealAddID">Add</div>
                                                <div id="incrSign" class="incrSignCls" style="display:none">
                                                    <div class="d-flex mealbtn-increase">
                                                        <div class="meal-decr">-</div>
                                                        <input type="number" class="mealinput" value="0">
                                                        <div class="meal-incr">+</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            }

                        }

                    </div>
                </div>
            }
        }

        for (int l = 0; l < Model.MealslistRT[1].legSsrs.Count; l++)
        {
            if (l == 0)
            {
                <div id="tabshowRTmealC" class="seat-section1">
                    C
                    <div class="swiper-wrapper flex-column slid-rght">

                        @{

                            for (int i = 0; i < Model.MealslistRT[1].legSsrs[l].legssrs.Count; i++)
                            {
                                <div class="swiper-slide active" style="max-width:100%;">
                                    <div class="tourTypeCard__content text-center pt-10 pb-24 px-10 bg-blue-1-05 rounded-4">
                                        <span class="nveg-food"></span>

                                        <div class="d-flex bg-light justify-content-between align-items-center p-3">
                                            <div class="d-flex">
                                                <div class="img-bg p-1">
                                                    <img src="~/img/images/pmeal.png" title="image" alt="image">
                                                </div>
                                                <div class="mealtext break-word p-1">
                                                    <h6 class="text-14 fw-600 mt-10">@Model.MealslistRT[1].legSsrs[l].legssrs[i].name </h6>
                                                    <div class="d-flex">
                                                        <div class="text-danger">&#8377</div>
                                                        <div><input class="input-ammount2" id="inputField" type="text" name="inputField" value="@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price" /></div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="d-flex justify-content-center">
                                                <input type="checkbox" id="ssrkey+@i" name="ssrKey" value='"@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].ssrKey _@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price _@l _@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].Airline _RT0"' />
                                                <input type="checkbox" class="meal-ammount" value="@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price" />
                                                <input type="hidden" id="mealprice+@i" name="inputFieldmeal" value="@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price" />
                                                <input type="hidden" id="passengerkey" name="passengerkey" value="@Model.passeengerlistRT[1].passengers[0].passengerKey" />

                                                @*<input type="submit" class="btn btn-primary" id="showValueButton" onchange="AddMeal()" value="Select" />*@
                                                @*<div class="btn2" data-ssrkey="ssrkey+@i" id="showValueButton" onclick="selectSSR_test(this)">Select</div>*@
                                            </div>
                                            <div class="mealbtn">
                                                <div class="mealAddFareBtn btnnew" id="mealAddID">Add</div>
                                                <div id="incrSign" class="incrSignCls" style="display:none">
                                                    <div class="d-flex mealbtn-increase">
                                                        <div class="meal-decr">-</div>
                                                        <input type="number" class="mealinput" value="0">
                                                        <div class="meal-incr">+</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>





                                    </div>
                                </div>

                            }

                        }

                    </div>
                </div>
            }
            else
            {
                <div id="tabshowRTmealD" class="seat-section1">
                    D
                    <div class="swiper-wrapper flex-column slid-rght">

                        @{

                            for (int i = 0; i < Model.MealslistRT[1].legSsrs[l].legssrs.Count; i++)
                            {
                                <div class="swiper-slide active" style="max-width:100%;">
                                    <div class="tourTypeCard__content text-center pt-10 pb-24 px-10 bg-blue-1-05 rounded-4">
                                        <span class="nveg-food"></span>

                                        <div class="d-flex bg-light justify-content-between align-items-center p-3">
                                            <div class="d-flex">
                                                <div class="img-bg p-1">
                                                    <img src="~/img/images/pmeal.png" title="image" alt="image">
                                                </div>
                                                <div class="mealtext break-word p-1">
                                                    <h6 class="text-14 fw-600 mt-10">@Model.MealslistRT[1].legSsrs[l].legssrs[i].name</h6>
                                                    <div class="d-flex">
                                                        <div class="text-danger">&#8377</div>
                                                        <div><input class="input-ammount2" id="inputField" type="text" name="inputField" value="@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price" /></div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="d-flex justify-content-center">
                                                <input type="checkbox" id="ssrkey+@i" name="ssrKey" value='"@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].ssrKey _@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price _@l _@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].Airline _RT1"' />
                                                <input type="checkbox" class="meal-ammount" value="@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price" />
                                                <input type="hidden" id="mealprice+@i" name="inputFieldmeal" value="@Model.MealslistRT[1].legSsrs[l].legssrs[i].legpassengers[0].price" />
                                                <input type="hidden" id="passengerkey" name="passengerkey" value="@Model.passeengerlistRT[1].passengers[0].passengerKey" />

                                                @*<input type="submit" class="btn btn-primary" id="showValueButton" onchange="AddMeal()" value="Select" />*@
                                                @*<div class="btn2" data-ssrkey="ssrkey+@i" id="showValueButton" onclick="selectSSR_test(this)">Select</div>*@
                                            </div>
                                            <div class="mealbtn">
                                                <div class="mealAddFareBtn btnnew" id="mealAddID">Add</div>
                                                <div id="incrSign" class="incrSignCls" style="display:none">
                                                    <div class="d-flex mealbtn-increase">
                                                        <div class="meal-decr">-</div>
                                                        <input type="number" class="mealinput" value="0">
                                                        <div class="meal-incr">+</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>

                            }

                        }

                    </div>
                </div>
            }
        }
    }
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="~/js/custom.js/customnew.js"></script>
<script>
    $(document).ready(function () {
        debugger;
        $('input[type="checkbox"]').on('change', function () {
            var selectedIds = [];
            debugger;
            $('input[type="checkbox"]:checked').each(function () {

                //selectedIds.push($(this).attr('id'));
                selectedIds.push($(this).val());
            });
            var input = document.getElementsByName("ssrKey");
            var total = 0;
            for (var i = 0; i < input.length; i++) {
                if (input[i].checked) {
                    total += parseInt(input[i].value);
                }
            }

            $.ajax({
                url: "/AATripsell/PostMeal",
                type: "POST",
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                data: { selectedIds: selectedIds },
                success: function (data) {
                    console.log(data);
                },
                error: function (err) {
                    console.error(err);
                }
            });


        });


    });





</script>
<script>

    /*********seatmap_tab_select_function_ServiceRequest_PartialView_Page***********/
    // Extract the meal code (ssrCode) from your HTML structure

    var mlC = 3; //***********Total Number of Passenger Count
    var totalIncrementCount = 0;
    const mealAddButtons = document.querySelectorAll('.mealbtn .mealAddFareBtn');
    mealAddButtons.forEach(function (mealAddButton) {
        mealAddButton.addEventListener('click', function () {
            const parentFlexElement = this.closest('.d-flex');
            parentFlexElement.querySelector('.incrSignCls').style.display = "block";
            parentFlexElement.querySelector('.mealAddFareBtn').style.display = "none";
            const incrButton = parentFlexElement.querySelector('.meal-incr');
            const decrButton = parentFlexElement.querySelector('.meal-decr');
            const mealInput = parentFlexElement.querySelector('.mealinput');



            //************Increament Button Click Function**************
            incrButton.addEventListener('click', function () {

                // Retrieve the value from the first hidden input with class "meal-ammount"
                if (totalIncrementCount >= mlC) {
                    alert("You can't add more than " + mlC + " items.");
                    return false;
                }
                else {
                    mealInput.value = parseInt(mealInput.value) + 1;
                    totalIncrementCount += 1;

                }
                var Mealcount = mealInput.value;
                localStorage.setItem("Mealcount", Mealcount);


                // var MealAddCount = localStorage.getItem("Mealcount");
                // document.querySelector('.passenger-count').value = MealAddCount;

                if (parseInt(mealInput.value) > 0) {
                    parentFlexElement.querySelector('.incrSignCls').style.display = "block";
                } else {
                    parentFlexElement.querySelector('.mealAddFareBtn').style.display = "none";
                }
            });

            //************Decreament Button Click Function**************
            decrButton.addEventListener('click', function () {
                if (parseInt(mealInput.value) > 1) {
                    mealInput.value = parseInt(mealInput.value) - 1;
                    totalIncrementCount -= 1;
                } else {
                    parentFlexElement.querySelector('.mealAddFareBtn').style.display = "none";
                }
            });

        });
    });



    // const mealAddButton = document.getElementById('Continuebtn');
    // mealAddButton.onclick = function () {
    //     alert("Button Clicked!");
    //     var MealAddCount = localStorage.getItem("Mealcount");

    //     var mealInputValue = MealAddCount; // Get the value of mealInput
    //     debugger;
    //     $.ajax({
    //         url: "/RoundAATripsell/PostUnitkey",
    //         type: "POST",
    //         contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
    //         data: {
    //             mealInputValue: mealInputValue // Pass the value of mealInput
    //         },
    //         success: function (data) {
    //             console.log(data);
    //             alert("Ajax Test ");
    //         },
    //         error: function (err) {
    //             console.error(err);
    //         }
    //     });
    // };


    /*********seatmap_tab_select_function_ServiceRequest_PartialView_Page***********/
    $(document).ready(function () {
        $("#mealtab1way").click(function () {
            alert("A");
            $("#tabshowRTmealA").show();
            $("#tabshowRTmealC").hide();
            $("#mealtab1way").addClass('activeblue');
            $("#mealtabRT1way").removeClass('activeblue');
        });
        $("#mealtabRT1way").click(function () {
            alert("C");
            $("#tabshowRTmealA").hide();
            $("#tabshowRTmealC").show();
            $("#mealtabRT1way").addClass('activeblue');
            $("#mealtab1way").removeClass('activeblue');
        });



        //Meal tab Function
        $("#tabshowRTmealB").hide();
        $("#tabshowRTmealC").hide();
        $("#tabshowRTmealD").hide();
        $("#mealtab1").click(function () {
            alert("A");
            $("#tabshowRTmealA").show();
            $("#tabshowRTmealB").hide();
            $("#tabshowRTmealC").hide();
            $("#tabshowRTmealD").hide();
            $("#mealtab1").addClass('activeblue');
            $("#mealtab2").removeClass('activeblue');
            $("#mealtabRT1").removeClass('activeblue');
            $("#mealtabRT2").removeClass('activeblue');

        });

        $("#mealtab2").click(function () {
            alert("B");
            $("#tabshowRTmealB").show();
            $("#tabshowRTmealA").hide();
            $("#tabshowRTmealC").hide();
            $("#tabshowRTmealD").hide();
            $("#mealtab2").addClass('activeblue');
            $("#mealtab1").removeClass('activeblue');
            $("#mealtabRT2").removeClass('activeblue');
            $("#mealtabRT1").removeClass('activeblue');

        });
        $("#mealtabRT1").click(function () {
            alert("C");
            $("#tabshowRTmealC").show();
            $("#tabshowRTmealA").hide();
            $("#tabshowRTmealB").hide();
            $("#tabshowRTmealD").hide();
            $("#mealtabRT1").addClass('activeblue');
            $("#mealtabRT2").removeClass('activeblue');
            $("#mealtab2").removeClass('activeblue');
            $("#mealtab1").removeClass('activeblue');


        });
        $("#mealtabRT2").click(function () {
            alert("D");
            $("#tabshowRTmealD").show();
            $("#tabshowRTmealA").hide();
            $("#tabshowRTmealB").hide();
            $("#tabshowRTmealC").hide();
            $("#mealtabRT2").addClass('activeblue');
            $("#mealtabRT1").removeClass('activeblue');
            $("#mealtab2").removeClass('activeblue');
            $("#mealtab1").removeClass('activeblue');

        });


    });
</script>



