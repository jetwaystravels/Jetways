@model DomainLayer.ViewModel.ViewModel

@{
    Layout = null;
    var data = Model;
}

<aside class="sidebar">
    <div class="row y-gap-40">
        <div class="sidebar__item">
            <h5 class="text-18 fw-600 mb-10">Popular Filters</h5>
            <div class="sidebar-checkbox">

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">
                        <div class="d-flex items-center">
                            <div class="form-checkbox ">

                                @* <input type="checkbox" class="selectCheckboxnon" value="0" name="stops" onclick="OnewayFunctionFirst()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="stops" value="0" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>
                            <div class="text-15 ml-10">Nonstop</div>
                        </div>
                    </div>
                    <div class="col-auto">
                        <div class="text-15 text-light-1">₹12,997</div>
                    </div>
                </div>

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                                <input type="checkbox" class="selectCheckboxNew" name="morningDeparture" data-departure="before_6am" onclick="DepartureCheckbox(); getFiltered();">
                               
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Morning Departures</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">₹14,997</div>
                    </div>
                </div>
                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Indigo" onclick="getFiltered()">
                             <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>
                            <div class="text-15 ml-10">Indigo</div>
                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">₹12,997</div>
                    </div>
                </div>
                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                              @*   <input type="checkbox" class="selectCheckboxAirLine" value="AkasaAir" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Airasia" onclick="getFiltered()">
                              <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>
                            <div class="text-15 ml-10">Air India Express</div>
                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">₹12,997</div>
                    </div>
                </div>
            </div>
        </div>
       @*  <div class="sidebar__item pb-30">
            <h5 class="text-18 fw-600 mb-10">Price</h5>
            <div class="row x-gap-10 y-gap-30">
                <div class="col-12">
                    <div class="js-price-rangeSlider">
                        <div class="text-14 fw-500"></div>

                        <div class="d-flex justify-between mb-20">
                            <div class="text-15 text-dark-1">
                                <span class="js-lower">$0</span>
                                -
                                <span class="js-upper">$500</span>
                            </div>
                        </div>

                        <div class="px-5">
                            <div class="js-slider noUi-target noUi-ltr noUi-horizontal noUi-txt-dir-ltr"><div class="noUi-base"><div class="noUi-connects"><div class="noUi-connect" style="transform: translate(0%, 0px) scale(0.25, 1);"></div></div><div class="noUi-origin" style="transform: translate(-100%, 0px); z-index: 5;"><div class="noUi-handle noUi-handle-lower" data-handle="0" tabindex="0" role="slider" aria-orientation="horizontal" aria-valuemin="0.0" aria-valuemax="500.0" aria-valuenow="0.0" aria-valuetext="$0"><div class="noUi-touch-area"></div></div></div><div class="noUi-origin" style="transform: translate(-75%, 0px); z-index: 6;"><div class="noUi-handle noUi-handle-upper" data-handle="1" tabindex="0" role="slider" aria-orientation="horizontal" aria-valuemin="0.0" aria-valuemax="2000.0" aria-valuenow="500.0" aria-valuetext="$500"><div class="noUi-touch-area"></div></div></div></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div> *@
        <div class="sidebar__item">
            <h5 class="text-18 fw-600 mb-20">Onward Journey</h5>
            <h4 class="text-16 fw-600 mt-10 mb-10">Departing from @Model.simpleAvailabilityRequestModelEdit.origin</h4>
            <div class="sidebar-checkbox">

                <div class="row y-gap-10 items-center justify-between">
                    <div class="flt-bx">
                        <div id="filter-one" class="flt-Tm-slt one" data-departure="before_6am">
                            <div class="btm-time">Before 6 AM</div>
                        </div>

                        <div id="filter-two" class="flt-Tm-slt two" data-departure="6am_to_12pm">
                            <div class="btm-time">6 AM - 12 PM</div>
                        </div>

                        <div id="filter-three" class="flt-Tm-slt three" data-departure="12pm_to_6pm">
                            <div class="btm-time">12 PM - 6 PM</div>
                        </div>

                        <div id="filter-four" class="flt-Tm-slt four" data-departure="after_6pm">
                            <div class="btm-time">After 6 PM</div>
                        </div>
                    </div>
                </div>

            </div>

            <h4 class="text-16 fw-600 mt-20 mb-10">Arrival at @Model.simpleAvailabilityRequestModelEdit.destination</h4>
            <div class="sidebar-checkbox">

                <div class="row y-gap-10 items-center justify-between">
                    <div class="flt-bx">
                        <div id="filter-one" class="flt-Tm-slt one" data-arrival="before_6am">
                            @* <input type="checkbox" id="checkbox-one" class="flt-checkbox selectCheckboxNew" data-arrival="before_6am" onclick="getFiltered()"> *@
                            <div class="btm-time">Before 6 AM</div>
                        </div>

                        <div id="filter-two" class="flt-Tm-slt two" data-arrival="6am_to_12pm">
                            <div class="btm-time">6 AM - 12 PM</div>
                        </div>

                        <div id="filter-three" class="flt-Tm-slt three" data-arrival="12pm_to_6pm">
                            <div class="btm-time">12 PM - 6 PM</div>
                        </div>

                        <div id="filter-four" class="flt-Tm-slt four" data-arrival="after_6pm">
                            <div class="btm-time">After 6 PM</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @* stopthird time *@
        <div class="sidebar__item">
            <h5 class="text-18 fw-600 mb-10">Stops</h5>
            <div class="sidebar-checkbox">

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">
                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                                @* <input type="checkbox" class="selectCheckbox" value="0" name="stopsCheckbox" onclick="OnewayFunction()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="stops" value="0" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Nonstop</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$92</div>
                    </div>
                </div>

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                              @*   <input type="checkbox" class="selectCheckbox" value="1" name="stopsCheckbox" onclick="OnewayFunction()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="stops" value="1" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <svg class="svg-inline--fa fa-check fa-w-16 form-checkbox__icon" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="check" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></svg><!-- <div class="form-checkbox__icon fa fa-check"></div> -->
                                </div>
                            </div>

                            <div class="text-15 ml-10">1 Stop</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$92</div>
                    </div>
                </div>

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                              @*   <input type="checkbox" class="selectCheckbox" value="2" name="stopsCheckbox" onclick="OnewayFunction()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="stops" value="2" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <svg class="svg-inline--fa fa-check fa-w-16 form-checkbox__icon" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="check" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></svg><!-- <div class="form-checkbox__icon fa fa-check"></div> -->
                                </div>
                            </div>

                            <div class="text-15 ml-10">2+ Stops</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$92</div>
                    </div>
                </div>

            </div>
        </div>
        @* AirLine time *@
        <div class="sidebar__item">
            <h5 class="text-18 fw-600 mb-10">Airlines</h5>
            <div class="sidebar-checkbox">

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Airasia" onclick="getFiltered()">

                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Air India Express</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$92</div>
                    </div>
                </div>

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                                @* <input type="checkbox" class="selectCheckboxAirLine" value="Indigo" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Indigo" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Indigo</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$45</div>
                    </div>
                </div>

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                               @*  <input type="checkbox" class="selectCheckboxAirLine" value="Spicejet" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Spicejet" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Spicejet</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$21</div>
                    </div>
                </div>
                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                            @*     <input type="checkbox" class="selectCheckboxAirLine" value="AkasaAir" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="AkasaAir" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Akasa Air</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$21</div>
                    </div>
                </div>
                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                               @*  <input type="checkbox" class="selectCheckboxAirLine" value="Vistara" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Vistara" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Vistara</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$21</div>
                    </div>
                </div>
                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                               @*  <input type="checkbox" class="selectCheckboxAirLine" value="AirIndia" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="AirIndia" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">AirIndia</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$21</div>
                    </div>
                </div>

                <div class="row y-gap-10 items-center justify-between">
                    <div class="col-auto">

                        <div class="d-flex items-center">
                            <div class="form-checkbox ">
                                @* <input type="checkbox" class="selectCheckboxAirLine" value="Hahnair" name="Airline" onclick="OnewayFunctionAirline()"> *@
                                <input type="checkbox" class="selectCheckboxNew" name="Airline" value="Hehnair" onclick="getFiltered()">
                                <div class="form-checkbox__mark">
                                    <div class="form-checkbox__icon fa fa-check"></div>
                                </div>
                            </div>

                            <div class="text-15 ml-10">Hahnair</div>

                        </div>

                    </div>

                    <div class="col-auto">
                        <div class="text-15 text-light-1">$21</div>
                    </div>
                </div>
            </div>
        </div>


    </div>
</aside>
<style>

    .flt-Tm-slt.active {
        background-color: #007bff; /* Change this to your desired active color */
        color: #007bff;
        /* Text color when active */
    }

    .flt-checkbox {
        display: none;
    }

    .flt-Tm-slt {
        cursor: pointer;
        width: 60px;
        height: 64px;
        border-radius: 4px;
        border: 0.7px solid #dfdfdf;
        background-color: #fff;
        text-align: center;
        color: #000;
        align-items: center;
        margin-right: 2px;
        position: relative;
    }

        .flt-Tm-slt.one {
            background: #fff url(../img/night-icon.png) no-repeat 19px 13px;
        }

    .flt-bx .btm-time {
        font-size: 9px;
        font-weight: 700;
        height: 64px;
        position: relative;
        top: 41px;
    }

    .flt-Tm-slt.checked {
        border: 1.5px solid #007bff;
        background-color: #e7f1ff;
    }


</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>


    var selectedDepartureTimes = [];
    var selectedArrivalTimes = [];

    $('.flt-Tm-slt').click(function () {
        let departureTime = $(this).data('departure');
        let arrivalTime = $(this).data('arrival');

        $(this).toggleClass('active');

        if ($(this).hasClass('active')) {
            // Add selected times to arrays
            if (!selectedDepartureTimes.includes(departureTime)) {
                selectedDepartureTimes.push(departureTime);
            }
            if (!selectedArrivalTimes.includes(arrivalTime)) {
                selectedArrivalTimes.push(arrivalTime);
            }
        } else {
            // Remove deselected times from arrays
            selectedDepartureTimes = selectedDepartureTimes.filter(function (item) {
                return item !== departureTime;
            });
            selectedArrivalTimes = selectedArrivalTimes.filter(function (item) {
                return item !== arrivalTime;
            });
        }
        getFiltered();
    });


   

    function DepartureCheckbox() {
        selectedDepartureTimes = [];
        $('.selectCheckboxNew[name="morningDeparture"]:checked').each(function () {
            let departureTime = $(this).data('departure');
            if (!selectedDepartureTimes.includes(departureTime)) {
                selectedDepartureTimes.push(departureTime);
            }
        });
    }


    $('.selectCheckboxNew[name="morningDeparture"]').on('change', function () {
        DepartureCheckbox(); 
        getFiltered();
    });


    function getFiltered() {
        let filterIdAirLine = [];
        let filterId = [];
        $('.selectCheckboxNew').each(function () {
            if ($(this).is(':checked')) {
                let name = $(this).attr('name');
                let value = $(this).val();

                if (name === 'Airline') {
                    filterIdAirLine.push(value);
                } else if (name === 'stops') {
                    filterId.push(parseInt(value, 10)); 
                }
            }
        });

        
        $.ajax({
            url: '/ResultFlightView/GetFilteredFlights',
            type: 'POST', 
            data: {
                FilterIdAirLine: filterIdAirLine,
                FilterId: filterId,
                departure: selectedDepartureTimes,
                arrival: selectedArrivalTimes
            },
            success: function (response) {
                
                $('#flight-results').html(response);
                console.log(response);
            },
            error: function (xhr, status, error) {
               
                console.error(error);
            }
        });
    }



</script>




