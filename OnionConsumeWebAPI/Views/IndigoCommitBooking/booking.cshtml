@using System.Collections;
@model DomainLayer.ViewModel.AirLinePNRTicket
@{
    var data = Model;
}


<!DOCTYPE html>
<html lang="en">
<head>
    <title>Indigo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/css/style_ticket.css" rel="stylesheet" />
    <link href="~/css/main.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style_ticket.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3/dist/JsBarcode.all.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>
    <style>

        #scissors {
            height: 43px; /* image height */
            width: 90%;
            margin: auto auto;
            background-image: url('http://i.stack.imgur.com/cXciH.png');
            background-repeat: no-repeat;
            background-position: right;
            position: relative;
            overflow: hidden;
        }

            #scissors:after {
                content: "";
                position: relative;
                top: 50%;
                display: block;
                border-top: 1px dashed #000;
                margin-top: 0px;
            }
    </style>
</head>
<body>
    @*
    <form asp-action="PostTicketBooking" asp-controller="AirLinesTicket" method="post">

    <div id="printableArea">
    <div class="container">
    <div class="row mt-5">
    <div class="d-flex flex-row justify-content-end">
    <div class="Tlogo">
    <img src="~/img/logo.png">
    <!--<img class="crazyFrog"></img>-->
    </div>
    </div>
    </div>
    </div>

    <!----------Legal Entity Section-------------->
    <section class="container mt-1">
    <div class="row border-dot">
    <div class="d-flex flex-row align-items-center justify-content-between">
    <div class="tripid">
    <span class="mb-0">Trip ID</span>
    <span class="mb-0  ms-1 fw-bold-600">@Model.AirlinePNR[0].bookingKey</span>
    </div>

    <div class="pnrdiv">
    <div class="TPNR d-flex">
    <div class="mb-0 fw-bold-600" id="Tpnr">Airline PNR : </div><div id="PNR" class="ms-2 t-color fw-bold-600 "><span class="mb-0">@Model.AirlinePNR[0].recordLocator</span></div>
    </div>
    </div>
    </div>

    </div>
    </section>

    <!-------------Air Line PNR Section ------------->
    <section class="container mt-1">
    <div class="row border-dot pt-2">
    @for (int i = 0; i < @Model.AirlinePNR[0].journeys.Count; i++)
    {
    @for (int i1 = 0; i1 < @Model.AirlinePNR[0].journeys[i].segments.Count; i1++)
    {
    <div class="pass">
    <div class="d-flex flex-row justify-content-between flex-wrap">
    <div class="TPNR">
    <span class="mb-0 fw-bold-600"><span id="depart"> @Model.AirlinePNR[0].journeys[i].segments[i1].designator.origin</span><span> to</span><span id="tarrive"> @Model.AirlinePNR[0].journeys[i].segments[i1].designator.destination</span></span>
    </div>
    </div>
    <div class="col-12 border-width"></div>

    <div class="col-12 border-width"></div>

    <!------Passengers-Detail-Section--------->
    @for (int i2 = 0; i2 < Model.AirlinePNR[0].passengers.Count; i2++)
    {
    <div class="col-12 PDetail">
    <div class="d-flex flex-row justify-content-between">
    <div class="Pdetail1">

    <ul class="td-inline">
    <li class="tlist-none"><span id="Adult1">Passengers @Model.AirlinePNR[0].passengers[i2].passengerTypeCode</span></li>
    <li class="tlist-none"><span id="Pname1" class="fw-bold-600">@Model.AirlinePNR[0].passengers[i2].name.first</span></li>
    @* <li class="tlist-none"><span>(Adult)</span></li>
    </ul>
    </div>
    <div class="Pdetail1">
    <ul class="td-inline">
    <li class="tlist-none"> <span>Mobile No:</span><span class="fw-bold-600">@Model.AirlinePNR[0].contacts.phoneNumbers</span></li>
    </ul>
    </div>

    <div class="Pdetail1">
    <ul class="td-inline">
    <li class="tlist-none"><svg id="barcode"></svg></li>
    </ul>
    </div>
    </div>
    </div>
    }
    </div>
    }
    <div class="col-12 border-width"></div>
    }

    <div class="col-12 border-width mt-1"></div>
    <!--------------Non-Stop------------------------->
    @for (int j = 0; j < @Model.AirlinePNR[0].journeys.Count; j++)
    {
    @for (int j1 = 0; j1 < @Model.AirlinePNR[0].journeys[j].segments.Count; j1++)
    {
    <div class="row mt-1">

    <div class="col-3">

    <div class="Clogo">
    <div class="Clogo2">
    @if (Model.AirlinePNR[0].airLines.ToString().ToLower().Equals("spicejet"))
    {

    <img class="size-40" src="~/img/flight-logo-icon/SG.png" alt="image">
    }
    else if (Model.AirlinePNR[0].airLines.ToString().ToLower().Equals("indigo"))
    {

    <img class="size-40" src="~/img/flight-logo-icon/6E.png" alt="image">
    }
    else
    {
    <img class="size-40" src="~/img/flight-logo-icon/1.webp" alt="image">
    }

    </div><span id="CName" class="fw-bold-600"> @Model.AirlinePNR[0].journeys[j].segments[j1].identifier.carrierCode</span> |
    <span id="Cnomer" class="fw-bold-600">@Model.AirlinePNR[0].journeys[j].segments[j1].identifier.identifier</span>
    </div>
    <div class="TEconomy">
    <span id="eco-class">Corpate Fare : </span>
    <span id="Cnomer" class="fw-bold-600"> Ecomomics</span>
    </div>

    </div>


    <div class="col-3">
    <h3 id="citycode" class="fw-bold-700 mb-0 t-color">@Model.AirlinePNR[0].journeys[j].segments[j1].designator.origin</h3>
    @{
    string origin = "";
    string queryorigin = Model.AirlinePNR[0].journeys[j].segments[j1].designator.origin;
    if (Citydata.GetAllcity().Where(x => x.cityCode == queryorigin).SingleOrDefault() != null)
    {
    origin = Citydata.GetAllcity().Where(x => x.cityCode == queryorigin).SingleOrDefault().cityName;
    }

    }

    <div>@origin</div>
    <div class="col-12 border-width"></div>
    <div class="fw-bold-600">@Model.AirlinePNR[0].journeys[j].segments[j1].designator.departure</div>
    <div class="col-12 border-width"></div>
    <p class="mb-0">Indira Gandhi International Airport</p>
    <p class="mb-0">Terminal: <span class="fw-bold-700 t-color">@Model.AirlinePNR[0].journeys[j].segments[j1].legs[0].legInfo.departureTerminal</span></p>

    </div>
    <div class="col-2 t-center">
    @{

    string formattedTime = string.Empty;
    var arrivalDate = Model.AirlinePNR[0].journeys[j].segments[j1].designator.arrival;
    var departureDate = Model.AirlinePNR[0].journeys[j].segments[j1].designator.departure;
    var diff = (arrivalDate - departureDate);
    TimeSpan timeSpan = TimeSpan.Parse(diff.ToString());
    if ((int)timeSpan.Minutes == 0)
    formattedTime = $"{(int)timeSpan.TotalHours} h";
    else
    formattedTime = $"{(int)timeSpan.TotalHours} h {(int)timeSpan.Minutes} m";
    }
    <div id="Ttiming" class="fw-bold-600">@formattedTime</div>

    <div class="arrow-icon"><i class="fas fa-arrow-right"></i></div>
    <!--<p class="mb-0">Economy</p>--->
    <!--<p>Status: <span class="fw-bold-600 t-color">Confirmed</span></p>-->
    </div>
    <div class="col-4">
    <h3 id="citycode" class="fw-bold-700 mb-0 t-color">@Model.AirlinePNR[0].journeys[j].segments[j1].designator.destination</h3>
    @{
    string destination = "";
    string querydestination = Model.AirlinePNR[0].journeys[j].segments[j1].designator.destination;
    if (Citydata.GetAllcity().Where(x => x.cityCode == querydestination).SingleOrDefault() != null)
    {
    destination = Citydata.GetAllcity().Where(x => x.cityCode == querydestination).SingleOrDefault().cityName;
    }

    }
    <div>@destination</div>
    <div class="col-12 border-width"></div>
    <div class="fw-bold-600">@Model.AirlinePNR[0].journeys[j].segments[j1].designator.arrival</div>
    <div class="col-12 border-width"></div>
    <p class="mb-0">Chhatrapati Shivaji Maharaj International Airport</p>
    <p class="mb-0">Terminal: <span class="fw-bold-700 t-color">@Model.AirlinePNR[0].journeys[j].segments[j1].legs[0].legInfo.arrivalTerminal</span></p>
    </div>

    </div>

    //Seat meal
    <div class="row">
    <div class="col-12 mt-1">
    <div class="col-12 border-width"></div>
    <div class="d-flex flex-row justify-content-between px-2 py-1">
    <div class="tseat5d d-flex align-items-center">
    <span><img src="~/img/pseat.png"></span>
    <div class="seat5d ps-2">
    <span class="fw-bold-600"> Seat  @Model.AirlinePNR[0].journeys[j].segments[j1].unitdesignator</span>
    </div>
    </div>


    <div class="tseat5d d-flex align-items-center">
    <span><img src="~/img/pmeal.png"></span>
    <div class="pmeal ps-2">
    <span class="fw-bold-600"> @Model.AirlinePNR[0].journeys[j].segments[j1].designator.origin-@Model.AirlinePNR[0].journeys[j].segments[j1].designator.destination: @Model.AirlinePNR[0].journeys[j].segments[j1].SSRCode</span>
    </div>
    </div>
    <div class="tseat5d d-flex align-items-center">
    <span><img src="~/img/pbaggage.png"></span>
    <div class="baggag ps-2 ">
    <div class="bgagg-kg">
    <span>Baggage:</span> <span class="fw-bold-600"> Cabin - 0kgs,</span>
    <span>Check-In -</span> <span class="fw-bold-600"> 0Kgs</span>
    </div>
    <div class="bgagg-kg">
    <span>Extra Baggage: </span> <span class="fw-bold-600"> NA</span>
    </div>
    <div class="bgagg-kg">
    <span>Special request: </span> <span class="fw-bold-600"> -</span>
    </div>
    </div>
    </div>
    </div>

    </div>
    </div>
    }
    }



    <!--------Passengers-D-End-------->
    </div>

    <!-----GST-DETAILS-------->
    @{
    if (@Model.AirlinePNR[0].customerNumber != null)
    {
    <div class="row mt-2">
    <div class="col-12">
    <span class="fw-bold-600">GST Details</span>
    </div>
    <div class="col-12 border-dot">
    <div class="row">
    <div class="col-auto">
    <div class="T-ID ">
    GST Number
    </div>
    <div class="T-ID fw-bold-600">
    <span>@Model.AirlinePNR[0].customerNumber</span>
    </div>
    </div>
    <div class="col-auto border-right"></div>
    <div class="col-auto">
    <div class="T-ID ">
    GST Name
    </div>
    <div class="T-ID fw-bold-600">
    <span> @Model.AirlinePNR[0].companyName</span>
    </div>
    </div>
    <div class="col-auto border-right"></div>
    <div class="col-auto">
    <div class="T-ID ">
    GST Email
    </div>
    <div class="T-ID fw-bold-600">
    <span>@Model.AirlinePNR[0].emailAddress</span>
    </div>
    </div>

    </div>
    </div>
    </div>
    }
    }

    <!--------Pricing-Details------------->
    <div class="row mt-2">
    <div class="col-12">
    <span class="fw-bold-600">Pricing Details</span>
    </div>
    <div class="col-12 border-dot">
    <div class="row">
    <div class="col-6">
    <div class="T-ID fw-bold-600">
    Mode of Payment:
    </div>
    </div>
    <div class="col-6">
    <div class="T-ID fw-bold-600">
    Bill to Company
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-12 border-width"></div>
    <div class="col-5">
    <div class="row mt-2">
    <div class="col-7">
    <span>Base Price</span>
    </div>
    <div class="col-5">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.journeyTotals.totalAmount</span>
    </div>
    </div>
    <div class="row mt-2">
    <div class="col-7">
    <span>Airline taxes and Fees</span>
    </div>
    <div class="col-5">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.journeyTotals.totalTax</span>
    </div>
    </div>
    <div class="row mt-2">
    <div class="col-auto">
    <!--<span>(Basic:57.00, PHF:50.00, TTF:201.00, ASF: 236.00, UDF:723.00, Airline GST: 302.00)</span>-->
    </div>
    </div>
    <div class="row mt-2">
    <div class="col-7">
    <span>6E (CCU-MAA) Airline GST</span>
    </div>
    <div class="col-5">
    <span class="fw-bold-600"></span>
    </div>
    </div>
    <div class="row mt-2">
    <div class="col-7">
    <span>Commissionable Tax</span>
    </div>
    <div class="col-5">
    <span class="fw-bold-600">0</span>
    </div>
    </div>
    <div class="row mt-2">
    <div class="col-7">
    <span>Non-Commissionable Tax</span>
    </div>
    <div class="col-5">
    <span class="fw-bold-600">0</span>
    </div>
    </div>
    <div class="row mt-2">
    <div class="col-7">
    <span>Airline Service Charge</span>
    </div>
    <div class="col-5">
    <span class="fw-bold-600">0</span>
    </div>
    </div>

    </div>

    <div class="col-2 border-right"></div>

    <div class="col-5">
    <div class="row">
    <div class="col-12">
    <div class="row">
    <div class="col-9">
    <span>Meal/Seat/Baggage/Misc Charges</span> <br>
    @* <span>(Meal:0)</span><br>
    <span>(Seat:@Model.AirlinePNR[0].breakdown.passengerTotals.seats.total)</span><br>
    <span>(Seat Tax:@Model.AirlinePNR[0].breakdown.passengerTotals.seats.taxes)</span><br>
    <span>(Baggage:0)</span><br>
    <span>(Misc Charges: 0)</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">0</span>
    </div>
    <div class="col-9">
    <span class="fw-bold-600">Meal:</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.passengerTotals.specialServices.total</span>
    </div>
    <div class="col-9">
    <span class="fw-bold-600">Seat (Tax Included):</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.passengerTotals.seats.total</span>
    </div>
    <div class="col-9">
    <span class="fw-bold-600">Seat Tax :</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.passengerTotals.seats.taxes</span>
    </div>
    <div class="col-9">
    <span class="fw-bold-600">Baggage:</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">0</span>
    </div>
    <div class="col-9">
    <span class="fw-bold-600">Misc Charges:</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">0</span>
    </div>
    </div>
    </div>

    <div class="col-12">
    <div class="row mt-2">
    <div class="col-9">
    <span>Finance Charges(s)</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">0</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="col-12 border-width"></div>
    </div>

    <!-----------------Toatl-Price-------------------------->

    <div class="row">
    <div class="col-5">
    <div class="row mt-2">
    <div class="col-9">
    <span class="fw-bold-600">Total Fare</span>
    </div>
    <div class="col-3">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.totalAmount</span>
    </div>
    </div>
    </div>
    <div class="col-auto"></div>
    <div class="col-5">
    <div class="row mt-2">
    <div class="col-9">
    <span class="fw-bold-600">Add-ons and Service Fee</span>
    </div>
    <div class="col-3">
    @{
    decimal AddsonsAmt = 0;
    AddsonsAmt = @Model.AirlinePNR[0].breakdown.passengerTotals.seats.total
    + @Model.AirlinePNR[0].breakdown.passengerTotals.specialServices.total;
    }
    <span class="fw-bold-600">@AddsonsAmt</span>
    </div>
    </div>
    </div>
    </div>

    <div class="row mt-2">
    <div class="col-12 border-width"></div>
    </div>
    <div class="d-flex flex-row justify-content-between">
    <div class="totalprice">
    <span class="fw-bold-600">Total Price (tatal Fare + Add-ons and Service Fee)</span>
    </div>
    <div class="totalprice">
    <span class="fw-bold-600">@Model.AirlinePNR[0].breakdown.totalToCollect</span>
    </div>
    </div>

    </div>
    </div>

    <div class="row border-dot my-4 py-2">
    <div class="col-12">
    <span class="fw-bold-600">Jetways Travels,</span>
    UGF 5, INDRA PRAKASH BUILDING 21, B.K. ROAD, CONNAUGHT PLACE, New Delhi 110001. <a class="tl-link" href="tel: 9090909090">+91-9090909090</a>
    </div>
    </div>

    <!------------------------------------>
    </section>
    </div>

    </form>
    *@
    <!--<div id="scissors"></div>---->
    <!---New Tikec design- Start----->

    <form asp-action="PostTicketBooking" asp-controller="AirLinesTicket" method="post">
        @{
            if (Model.AirlinePNR.Count > 0)
            {
                for (int a = 0; a < Model.AirlinePNR.Count; a++)
                {

                    Hashtable htseat = Model.AirlinePNR[a].Seatdata;
                    Hashtable htmeal = Model.AirlinePNR[a].Mealdata;

                    <div class="container">
                        <div class="flight-tckt-main">
                            <div class="top">
                                <label><img src="~/img/logo/logo.png" alt="brand-logo"></label>
                                <label class="fr">
                                    <h4>E-Ticket </h4>
                                    Jetways Travel Booking <strong>@Model.AirlinePNR[a].bookingKey</strong> <br> PNR. <span style="color: #EF0000;font-size: 16px;font-weight: 600;">@Model.AirlinePNR[a].recordLocator</span>
                                    <br> Booking Date : <span style="font-size: 16px;font-weight: 600;"></span>
                                </label>
                            </div>
                            <h3>Itinerary and Reservation Details</h3>
                            <div class="itinerary-section">
                                <div class="col">

                                    @for (int i = 0; i < @Model.AirlinePNR[a].journeys.Count; i++)
                                    {
                                        @for (int i1 = 0; i1 < @Model.AirlinePNR[a].journeys[i].segments.Count; i1++)
                                        {
                                            <div class="row x-gap-20 bdr">
                                                <div class="col-auto">
                                                    <div class="logo"><img class="size-35" src="~/img/flight-logo-icon/6E.png" alt="logo"></div>
                                                </div>
                                                <div class="col">
                                                    <div class="airline-N">Indigo<br> @Model.AirlinePNR[a].journeys[i].segments[i1].identifier.carrierCode-@Model.AirlinePNR[a].journeys[i].segments[i1].identifier.identifier</div>
                                                </div>
                                                <div class="col-auto">
                                                    @{
                                                        string origin = "";
                                                        string originairport = "";
                                                        string queryorigin = Model.AirlinePNR[a].journeys[i].segments[i1].designator.origin;
                                                        if (Citynamelist.GetAllCityData().Where(x => x.citycode == queryorigin).SingleOrDefault() != null)
                                                        {
                                                            origin = Citynamelist.GetAllCityData().Where(x => x.citycode == queryorigin).SingleOrDefault().cityname;
                                                            originairport = Citynamelist.GetAllCityData().Where(x => x.citycode == queryorigin).SingleOrDefault().airportname;
                                                        }
                                                       

                                                        string departuretime = @Model.AirlinePNR[a].journeys[i].segments[i1].designator.departure.ToString().Substring(11, 5);
                                                        string departuredate = @Model.AirlinePNR[a].journeys[i].segments[i1].designator.departure.ToString().Substring(0, 10);

                                                        //Arrival  code
                                                        string arrival = "";
                                                        string arrivalairport = "";
                                                        string queryarrival = Model.AirlinePNR[a].journeys[i].segments[i1].designator.destination;
                                                        if (Citynamelist.GetAllCityData().Where(x => x.citycode == queryarrival).SingleOrDefault() != null)
                                                        {
                                                            arrival = Citynamelist.GetAllCityData().Where(x => x.citycode == queryarrival).SingleOrDefault().cityname;
                                                            arrivalairport = Citynamelist.GetAllCityData().Where(x => x.citycode == queryarrival).SingleOrDefault().airportname;
                                                        }

                                                        string arrivaltime = @Model.AirlinePNR[a].journeys[i].segments[i1].designator.arrival.ToString().Substring(11, 5);
                                                        string arrivaldate = @Model.AirlinePNR[a].journeys[i].segments[i1].designator.arrival.ToString().Substring(0, 10);
                                                    }
                                                    <div class="Dst-name">
                                                        <span class="red">@origin</span> @departuretime <span>
                                                            <strong>@departuredate</strong>
                                                        </span> <span>Terminal @Model.AirlinePNR[a].journeys[i].segments[i1].legs[0].legInfo.departureTerminal</span>
                                                        <span>@originairport</span>
                                                    </div>
                                                </div>

                                                <div class="col-auto text-center">
                                                    @{

                                                        string formattedTime = string.Empty;
                                                        var arrivalDate = Model.AirlinePNR[a].journeys[i].segments[i1].designator.arrival;
                                                        var departureDate = Model.AirlinePNR[a].journeys[i].segments[i1].designator.departure;
                                                        var diff = (arrivalDate - departureDate);
                                                        TimeSpan timeSpan = TimeSpan.Parse(diff.ToString());
                                                        if ((int)timeSpan.Minutes == 0)
                                                            formattedTime = $"{(int)timeSpan.TotalHours} h";
                                                        else
                                                            formattedTime = $"{(int)timeSpan.TotalHours} h {(int)timeSpan.Minutes} m";
                                                    }
                                                    <img src="~/img/arrow-line-fr.png" alt="icon">
                                                    <div class="time">@formattedTime</div>
                                                </div>

                                                <div class="col">
                                                    <div class="Dst-name"><span class="red">@arrival</span> @arrivaltime <span><strong>@arrivaldate</strong></span> <span>Terminal @Model.AirlinePNR[a].journeys[i].segments[i1].legs[0].legInfo.arrivalTerminal</span>
                                                        <span>@arrivalairport</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }

                                    }

                                </div>
                            </div>


                            <div class="ticket-info">
                                <h3>PASSENGER AND TICKET INFORMATION </h3>
                                <table class="table table-bordered">
                                    <thead>
                                        <span>Fllight Detail</span>
                                        <tr>
                                            <th scope="col">Passenger</th>
                                            <th scope="col" class="col-one">Sector</th>
                                            <th scope="col" class="col-one">Airline </th>
                                            <th scope="col">Seat No</th>
                                            <th scope="col">Mobile</th>
                                            <th scope="col">Ticket Number</th>
                                            <th scope="col">Status</th>
                                            <th scope="col">Bar code</th>
                                        </tr>
                                    </thead>
                                    @for (int i2 = 0; i2 < Model.AirlinePNR[a].passengers.Count; i2++)
                                    {
                                        @for (int i3 = 0; i3 < @Model.AirlinePNR[a].journeys[0].segments.Count; i3++)
                                        {
                                            <tbody>
                                                <tr>
                                                    @{
                                                        if (i3 == 0)
                                                        {
                                                            <td>@Model.AirlinePNR[a].passengers[i2].name.first (@Model.AirlinePNR[a].passengers[i2].passengerTypeCode)</td>
                                                        }
                                                        else
                                                        {
                                                          <td></td>  
                                                        }
                                                    }
                                                    <td>@Model.AirlinePNR[a].journeys[0].segments[i3].designator.origin - @Model.AirlinePNR[a].journeys[0].segments[i3].designator.destination </td>
                                                    <td>@Model.AirlinePNR[a].journeys[0].segments[i3].identifier.carrierCode - @Model.AirlinePNR[a].journeys[0].segments[i3].identifier.identifier</td>
                                                    @{
                                                        string hashdata = @Model.AirlinePNR[a].passengers[i2].passengerKey + "_" + @Model.AirlinePNR[a].journeys[0].segments[i3].designator.origin + "_" + @Model.AirlinePNR[a].journeys[0].segments[i3].designator.destination;

                                                        if (htseat != null)
                                                        {
                                                            <td>@htseat[hashdata]</td>
                                                        }
                                                    }
                                                    <td>@Model.AirlinePNR[a].passengers[i2].MobNumber</td>
                                                    <td>AD1WSM/1/1</td>
                                                    <td>Confirm</td>
                                                    <td><img src="~/img/bar-code.png" alt="icon"></td>
                                                </tr>

                                            </tbody>
                                        }
                                    }
                                </table>
                            </div>


                            <div class="Flight-Inclusion">
                                <h3>Flight Inclusion</h3>
                                <table class="table table-bordered" style="margin-bottom: 0.4rem;">
                                    <thead>
                                        <span>Fllight Detail</span>
                                        <span class="baggage">Baggage</span>
                                        <tr>
                                            <th scope="col">Passenger</th>
                                            <th scope="col" class="col-one">Sector</th>
                                            <th scope="col" class="col-one">Airline </th>
                                            <th scope="col">Meal Type</th>
                                            <th scope="col" class="col-one">Check In </th>
                                            <th scope="col" class="col-one">Cabin</th>
                                            <th scope="col">Insurance Status</th>
                                        </tr>
                                    </thead>
                                    @for (int i2 = 0; i2 < Model.AirlinePNR[a].passengers.Count; i2++)
                                    {
                                        @for (int i3 = 0; i3 < @Model.AirlinePNR[a].journeys[0].segments.Count; i3++)
                                        {
                                            <tbody>
                                                <tr>
                                                    @{
                                                        if (i3 == 0)
                                                        {
                                                            <td>@Model.AirlinePNR[a].passengers[i2].name.first (@Model.AirlinePNR[a].passengers[i2].passengerTypeCode)</td>
                                                        }
                                                        else
                                                        {
                                                            <td></td>
                                                        }
                                                    }
                                                    <td>@Model.AirlinePNR[a].journeys[0].segments[i3].designator.origin - @Model.AirlinePNR[a].journeys[0].segments[i3].designator.destination </td>
                                                    <td>@Model.AirlinePNR[a].journeys[0].segments[i3].identifier.carrierCode - @Model.AirlinePNR[a].journeys[0].segments[i3].identifier.identifier</td>

                                                    @{
                                                        string hashdata = @Model.AirlinePNR[a].passengers[i2].passengerKey + "_" + @Model.AirlinePNR[a].journeys[0].segments[i3].designator.origin + "_" + @Model.AirlinePNR[a].journeys[0].segments[i3].designator.destination;

                                                        if (htmeal != null)
                                                        {
                                                            <td>@htmeal[hashdata]</td>
                                                        }
                                                    }
                                                    <td>AD1WSM</td>
                                                    <td>AD1WSM/1/1</td>
                                                    <td>Confirm</td>
                                                </tr>

                                            </tbody>
                                        }
                                    }
                                </table>

                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th scope="col" style="background:none; text-align:center;">Fare Details</th>
                                            <th scope="col" style="background:none; text-align:center;">Amount (INR)</th>
                                        </tr>
                                    </thead>
                                    <tbody class="fare">
                                        <tr>
                                            <td>Total Basic Fare:</td>
                                            <td>Rs. @Model.AirlinePNR[a].breakdown.journeyTotals.totalAmount</td>
                                        </tr>
                                        <tr>
                                            <td>Airline taxes and fees</td>
                                            <td>Rs. @Model.AirlinePNR[a].breakdown.journeyTotals.totalTax</td>
                                        </tr>
                                        <tr>
                                            <td>Discount:</td>
                                            <td>Rs.(-) 0.00</td>
                                        </tr>
                                        <tr>
                                            <td>Insurance Fee:</td>
                                            <td>Rs. 0.00</td>
                                        </tr>
                                        <tr>
                                            <td>Addon Meal Amount:</td>
                                            <td>Rs. @Model.AirlinePNR[a].breakdown.passengerTotals.specialServices.total</td>
                                        </tr>
                                        <tr>
                                            <td>Addon Bagg Amount:</td>
                                            <td>Rs. 0.00</td>
                                        </tr>
                                        <tr>
                                            <td>Seat Amount:</td>
                                            <td>Rs. @Model.AirlinePNR[a].breakdown.passengerTotals.seats.total</td>
                                        </tr>
                                        <tr style="background:#FCE1E1;">
                                            <td style="text-transform:uppercase;"><strong>total</strong></td>
                                            <td><strong>Rs. @Model.AirlinePNR[a].breakdown.totalToCollect</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            @*
                            <div class="ticket-info">
                                <h3 style="color:inherit;">Airline Fee:</h3>
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th scope="col" colspan="2">Airlline</th>

                                            <th scope="col">Charges </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Indigo </td>
                                            <td>Before 4 hourse of departurev</td>
                                            <td>Rs.1856(per pax per sector)</td>
                                        </tr>
                                        <tr>
                                            <td>Spicejet</td>
                                            <td>Before 4 hourse of departure</td>
                                            <td>Rs.907(per pax per sector)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>  *@
                            <div class="t-c">
                                <h3 style="color:inherit;">Terms &amp; Conditions:</h3>
                                <ul>
                                    <li><span>-&nbsp;&nbsp;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim</li>
                                    <li><span>-&nbsp;&nbsp;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim</li>
                                    <li><span>-&nbsp;&nbsp;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim consectetur adipiscing elit. Morbi dignissim</li>
                                    <li><span>-&nbsp;&nbsp;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim</li>
                                    <li><span>-&nbsp;&nbsp;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim consectetur adipiscing elit. Morbi dignissim</li>
                                    <li><span>-&nbsp;&nbsp;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dignissim</li>
                                </ul>
                            </div>
                            <div class="btm">Jetways Travels, UGF 5, Indra Prakash Building 21, B.K. Road, Connaught Place, New Delhi 110001. <strong>+91-9090909090</strong></div>
                        </div>
                    </div>
                }
            }
        }
    </form>
    <!---New ticket Design End------>


    <div class="container">
        <div class="row mb-5">
            <div class="col-12">
                <!--<button id="savePDFbutton" onclick="savePDF()"> save pdf</button>-->
                <input type="button" onclick="printDiv('printableArea')" value="Print and Save Ticket!" />
            </div>
        </div>
    </div>



</body>
</html>


<script type="text/javascript">

    //JsBarcode("#barcode", "1234", {
    //format: "pharmacode",
    //lineColor: "#0aa",
    //width: 4,
    //height: 40,
    //displayValue: false
    //});

    JsBarcode("#barcode", "Vinay", {
        width: 1,
        height: 30,
        displayValue: false

    });

    //-----PDF-Filegenrate-Code-----------
    //var testDivElement = document.getElementById('someHtml');

    //function savePDF() {
    // var imgData;
    //html2canvas($("#someHtml"), {
    //useCORS: true,
    //onrendered: function (canvas) {
    // imgData = canvas.toDataURL('image/png');
    // var doc = new jsPDF('p', 'pt', 'a4');
    // doc.addImage(imgData, 'PNG', 10, 10);
    //doc.save('sample-file.pdf');
    //window.open(imgData);
    //}

    //});
    //};



    function printDiv(divName) {

        var printContents = document.getElementById(divName).innerHTML;

        var originalContents = document.body.innerHTML;

        document.body.innerHTML = printContents;

        window.print();

        document.body.innerHTML = originalContents;

    }

</script>


